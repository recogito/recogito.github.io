<!DOCTYPE html>
<html>
  <head>
    <title>Annotorious | API Docs | Annotorious OSD Plugin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
      
    <link rel="stylesheet" href="/css/style.min.75017861b239a23b53d820680640ff764c73ea81a8fe85f2d9bf0dc63ff88982.css">
    <meta name="description" content="API Documentation for the Annotorious OpenSeadragon plugin">
<meta name="twitter:title" content="Annotorious OpenSeadragon API" />
<meta name="twitter:image:src" content="https://recogito.github.io/images/annotorious-social-large.png" />
<meta name="twitter:site" content="@aboutgeo" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="API Documentation for the Annotorious OpenSeadragon plugin">
<meta property="og:title" content="Annotorious OpenSeadragon API" />
<meta property="og:description" content="API Documentation for the Annotorious OpenSeadragon plugin">
<meta property="og:url" content="https://recogito.github.io/annotorious/api-docs/osd-plugin" />
<meta property="og:image" content="https://recogito.github.io/images/annotorious-social-large.png" />
<meta property="og:type" content="object" />

    <script>if(!sessionStorage.getItem("_swa")&&document.referrer.indexOf(location.protocol+"//"+location.host)!== 0){fetch("https://counter.dev/track?"+new URLSearchParams({referrer:document.referrer,screen:screen.width+"x"+screen.height,user:"rainer@no5.at",utcoffset:"1"}))};sessionStorage.setItem("_swa","1");</script>
  </head>
  <body>
    <div id="navbar" class="navbar">
  <script>
    var openResponsiveMenu = function() {
      var el = document.getElementById('navbar');
      if (el.className === 'navbar') {
        el.className = 'navbar responsive';
      } else {
        el.className = 'navbar';
      }
    };
  </script>
  <header>
    <div class="mobile-only">
      <button class="hamburger-icon" id="open-responsive-menu" onclick="openResponsiveMenu()">
        <img src="/images/menu-24px.svg">
      </button>      
    </div>
    <ul>
      <li>
        <a href="/annotorious/">Home</a>
      </li>

      <li class=''>
        <a href="/annotorious/getting-started">Getting Started</a>
      </li>

      <li class='current'>
        <a href="/annotorious/api-docs">API Docs</a>
      </li>
      
      <li class=''>
        <a href="/guides">Guides</a>
      </li>

      <li class=''>
        <a href="/annotorious/plugins">Plugins</a>
      </li>

      <li class=''>
        <a href="/annotorious/about">About</a>
      </li>
      
      <li class="github"><a href="https://github.com/recogito/annotorious"><img src="/images/github-logo.svg"></a></li>
    </ul>
  </header>
</div>


    <div class="column">
      <div class="main-content">
        <h1 id="api-reference-openseadragon-plugin">API Reference: OpenSeadragon Plugin</h1>
<blockquote>
<p>The <strong>OpenSeadragon Plugin</strong> is an extension to the
<a href="http://openseadragon.github.io/">OpenSeadragon</a> zoomable image viewer.
If you are looking for the standard version of Annotorious, which works with
normal images embedded in websites, <a href="/annotorious/api-docs/annotorious">see here instead</a>.</p>
</blockquote>
<h2 id="initialization">Initialization</h2>
<p>When included via <code>&lt;script&gt;</code> tag:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#268bd2">var</span> anno <span style="color:#719e07">=</span> OpenSeadragon.Annotorious(viewer, config);
</span></span></code></pre></div><p>With npm:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#268bd2">import</span> OpenSeadragon from <span style="color:#2aa198">&#39;openseadragon&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#268bd2">import</span> <span style="color:#719e07">*</span> as Annotorious from <span style="color:#2aa198">&#39;@recogito/annotorious-openseadragon&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#268bd2">import</span> <span style="color:#2aa198">&#39;@recogito/annotorious-openseadragon/dist/annotorious.min.css&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#268bd2">const</span> viewer <span style="color:#719e07">=</span> OpenSeadragon({
</span></span><span style="display:flex;"><span>  id<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;openseadragon&#34;</span>,
</span></span><span style="display:flex;"><span>  tileSources<span style="color:#719e07">:</span> {
</span></span><span style="display:flex;"><span>    type<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;image&#34;</span>,
</span></span><span style="display:flex;"><span>    url<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;1280px-Hallstatt.jpg&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#268bd2">const</span> config <span style="color:#719e07">=</span> {}; <span style="color:#586e75">// Optional plugin config options
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>
</span></span><span style="display:flex;"><span>Annotorious(viewer, config);
</span></span></code></pre></div><p>The <code>config</code> object is optional, and supports following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>allowEmpty</code></td>
<td>Boolean</td>
<td>false</td>
<td>Annotations created without bodies are normally discarded. Set to <code>true</code> to allow empty annotations.</td>
</tr>
<tr>
<td><code>disableEditor</code></td>
<td>Boolean</td>
<td>false</td>
<td>Disable the editor if you only need drawing functionality, but not the popup.</td>
</tr>
<tr>
<td><code>disableSelect</code></td>
<td>Boolean</td>
<td>false</td>
<td>Disables selection functionality. Clicking will no longer open the editor. (The <code>clickAnnotation</code> event still fires.)</td>
</tr>
<tr>
<td><code>drawOnSingleClick</code></td>
<td>Boolean</td>
<td>false</td>
<td>If <code>true</code> users can start drawing with a single click also, not just with click-and-drag</td>
</tr>
<tr>
<td><code>formatters</code></td>
<td>Array | Function</td>
<td>-</td>
<td>A <a href="#formatters">formatter function</a> or list of functions providing custom style rules.</td>
</tr>
<tr>
<td><code>fragmentUnit</code></td>
<td>String</td>
<td>&lsquo;pixel&rsquo;</td>
<td>Store rectangle coordinates in <code>pixel</code> units (default) or <code>percent</code> units.</td>
</tr>
<tr>
<td><code>gigapixelMode</code></td>
<td>Boolean</td>
<td>false</td>
<td>Enables slower, but more accurate shape rendering on images with extrememly high resolution. Note that gigapixelMode current doesn&rsquo;t support rotate or flipped OSD views.</td>
</tr>
<tr>
<td><code>handleRadius</code></td>
<td>Number</td>
<td>6</td>
<td>Radius of the shape resize handles.</td>
</tr>
<tr>
<td><code>hotkey</code></td>
<td>Object</td>
<td>-</td>
<td>Re-assigns the key that activates drawing mode (Shift by default). Allowed values are, either, a keycode (e.g. &lsquo;Shift&rsquo;, &lsquo;Alt&rsquo;, &lsquo;Control&rsquo;), or an object with a <code>key</code> and an optional <code>inverted</code> property. If <code>inverted</code> is set to <code>true</code>, Annotorious is permanently in drawing mode. Image navigation is only possible when the hotkey is pressed.</td>
</tr>
<tr>
<td><code>locale</code></td>
<td>String</td>
<td>-</td>
<td>Two-character ISO language code or <code>auto</code> to use the browser setting.</td>
</tr>
<tr>
<td><code>messages</code></td>
<td>Object</td>
<td>-</td>
<td>Custom UI labels. Requires a <a href="https://recogito.github.io/guides/contributing-ui-translations/">message dictionary</a> object.</td>
</tr>
<tr>
<td><code>readOnly</code></td>
<td>Boolean</td>
<td>false</td>
<td>Display annotations in read-only mode.</td>
</tr>
<tr>
<td><code>widgets</code></td>
<td>Array</td>
<td>-</td>
<td>A list of editor widget definitions (see <a href="/guides/customizing-the-editor/">this guide</a> for details).</td>
</tr>
</tbody>
</table>
<h2 id="instance-fields">Instance Fields</h2>
<h3 id="disableeditor">disableEditor</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>console.log(anno.disableEditor); <span style="color:#586e75">// true or fals
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>anno.disableEditor <span style="color:#719e07">=</span> <span style="color:#719e07">!</span>anno.disableEditor; <span style="color:#586e75">// toggles state
</span></span></span></code></pre></div><p>Change the operation mode between <strong>normal</strong> (drawing tools &amp; editor popup) and <strong>headless</strong>. In
headless mode, only drawing tools and lifecycle events are active. The editor will not open.</p>
<h3 id="disableselect">disableSelect</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>console.log(anno.disableSelect); <span style="color:#586e75">// true or false
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>anno.disableSelect <span style="color:#719e07">=</span> <span style="color:#719e07">!</span>anno.disableSelect;
</span></span></code></pre></div><p>Disables selection functionality. Clicking an annotation will no longer open the editor, or fire
the <code>selectAnnotation</code> event. The <code>clickAnnotation</code> event will still fire!</p>
<p>Setting <code>disableSelect</code> to <code>true</code> will <strong>not</strong> clear the current selection, if any.</p>
<h3 id="formatters">formatters</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.formatters <span style="color:#719e07">=</span> [ ...anno.formatters, MyFormatter ];
</span></span></code></pre></div><p>The <a href="#formatters">formatter</a> functions on this Annotorious instance.</p>
<h3 id="readonly">readOnly</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>console.log(anno.readOnly); <span style="color:#586e75">// true or fals
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>anno.readOnly <span style="color:#719e07">=</span> <span style="color:#719e07">!</span>anno.readOnly; <span style="color:#586e75">// toggles state
</span></span></span></code></pre></div><p>Change display mode between <strong>normal</strong> (annotations are editable) and <strong>read-only</strong>.</p>
<h3 id="widgets">widgets</h3>
<p>Dynamically changes the current set of editor widgets.</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.widgets <span style="color:#719e07">=</span> [...anno.widgets, MyCustomWidget ];
</span></span></code></pre></div><p>Change display mode between <strong>normal</strong> (annotations are editable) and <strong>read-only</strong>.</p>
<h2 id="instance-methods">Instance Methods</h2>
<h3 id="addannotation">.addAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.addAnnotation(annotation);
</span></span></code></pre></div><p>Adds an annotation programmatically. The format is the
<a href="https://github.com/recogito/annotorious-openseadragon/wiki/Web-Annotation-Model">W3C WebAnnotation model</a>.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation in W3C WebAnnotation format</td>
</tr>
</tbody>
</table>
<h3 id="adddrawingtool">.addDrawingTool</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.addDrawingTool(plugin);
</span></span></code></pre></div><p>Register a drawing tool plugin.</p>
<h3 id="cancelselected">.cancelSelected</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.cancelSelected();
</span></span></code></pre></div><p>Programmatically cancel the current selection, if any.</p>
<p><strong>Note:</strong> programmatic cancel <strong>will not</strong> trigger the <a href="#cancelselected-1">cancelSelected event</a>!</p>
<h3 id="clearannotations">.clearAnnotations</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.clearAnnotations();
</span></span></code></pre></div><p>Delete all annotations from the image.</p>
<h3 id="clearauthinfo">.clearAuthInfo</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.clearAuthInfo();
</span></span></code></pre></div><p>Clears the user auth information. Annotorious will no longer insert creator data
when a new annotation is created or updated. (See <a href="#setauthinfo">setAuthInfo</a> for
more information about creator data.)</p>
<h3 id="destroy">.destroy</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.destroy();
</span></span></code></pre></div><p>Destroys this instance of Annotorious, removing the annotation layer on the image.</p>
<h3 id="fitbounds">.fitBounds</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.fitBounds(arg [, immediately]);
</span></span></code></pre></div><p>Makes the OpenSeadragon viewport pan and zoom to the bounds of the specified annotation.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation or the annotation ID</td>
</tr>
<tr>
<td><code>immediately</code></td>
<td>Boolean</td>
<td>if <code>true</code> pans and zooms without animation</td>
</tr>
</tbody>
</table>
<h3 id="fitboundswithconstraints">.fitBoundsWithConstraints</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.fitBoundsWithConstraints(arg [, immediately]);
</span></span></code></pre></div><p>Makes the OpenSeadragon viewport pan and zoom to the bounds of the specified annotation,
while enforcing the constraints (minZoom, maxZoom and visibilityRatio).</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation or the annotation ID</td>
</tr>
<tr>
<td><code>immediately</code></td>
<td>Boolean</td>
<td>if <code>true</code> pans and zooms without animation</td>
</tr>
</tbody>
</table>
<h3 id="getannotationbyid">.getAnnotationById</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#268bd2">const</span> annotation <span style="color:#719e07">=</span> getAnnotationById(id);
</span></span></code></pre></div><p>Returns the annotation with the specified ID.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>String</td>
<td>the annotation ID</td>
</tr>
</tbody>
</table>
<h3 id="getannotations">.getAnnotations</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.getAnnotations();
</span></span></code></pre></div><p>Returns all annotations according to the current rendered state, in W3C Web Annotation format.</p>
<h3 id="getannotationsintersecting">.getAnnotationsIntersecting</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.getAnnotationsIntersecting(arg);
</span></span></code></pre></div><p>Returns the annotations whose bounding boxes intersect with the bounding box of the specified annotation.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation or the annotation ID</td>
</tr>
</tbody>
</table>
<h3 id="getimagesnippetbyid">.getImageSnippetById</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#268bd2">const</span> { snippet, transform } <span style="color:#719e07">=</span> anno.getImageSnippetById(annotationId);
</span></span></code></pre></div><p>Returns an object containing:</p>
<ul>
<li>A DOM CANVAS element with the given annotation&rsquo;s image snippet</li>
<li>A coordinate transform function that translates X/Y coordinates in the
snippet coordinate space back to the coordinate space of the full image</li>
</ul>
<blockquote>
<p><strong>Warning:</strong> this method is currently for experimental use <strong>only.</strong>
It will only return a valid snippet if the given annotation is currently
visible in the OpenSeadragon viewport.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>snippet</code></td>
<td>Canvas</td>
<td>the image under the given annotations&rsquo; bounds as a CANVAS element</td>
</tr>
<tr>
<td><code>transform</code></td>
<td>Function</td>
<td>coordinate conversion function</td>
</tr>
</tbody>
</table>
<h3 id="getselected">.getSelected</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#268bd2">const</span> selected <span style="color:#719e07">=</span> anno.getSelected();
</span></span></code></pre></div><p>Returns the currently selected annotation.</p>
<h3 id="getselectedimagesnippet">.getSelectedImageSnippet</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#268bd2">const</span> { snippet, transform } <span style="color:#719e07">=</span> anno.getSelectedImageSnippet();
</span></span></code></pre></div><p>Returns an object containing:</p>
<ul>
<li>A <strong>Canvas</strong> element, in the size of the current selection&rsquo;s bounding box, with
the selected image snippet (in the same resolution as the current OpenSeadragon viewport)</li>
<li>A coordinate transform function that translates X/Y coordinates in the snippet coordinate
space back to the coordinate space of the full image</li>
</ul>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>snippet</code></td>
<td>Canvas</td>
<td>the image under the current selection bounds as a <code>Canvas</code> element</td>
</tr>
<tr>
<td><code>transform</code></td>
<td>Function</td>
<td>coordinate conversion function</td>
</tr>
</tbody>
</table>
<h3 id="listdrawingtools">.listDrawingTools</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#268bd2">const</span> toolNames <span style="color:#719e07">=</span> anno.listDrawingTools();
</span></span></code></pre></div><p>Returns a list of the available drawing tools, including those from registered drawing
tool plugins.</p>
<h3 id="loadannotations">.loadAnnotations</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.loadAnnotations(url);
</span></span></code></pre></div><p>Loads annotations from a JSON URL. The method returns a promise, in
case you want to perform an action after the annotations have loaded.</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>anno.loadAnnotations(url).then(<span style="color:#268bd2">function</span>(annotations) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// Do something
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td>String</td>
<td>the URL to HTTP GET the annotations from</td>
</tr>
</tbody>
</table>
<h3 id="off">.off</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.off(event [, callback]);
</span></span></code></pre></div><p>Unsubscribe from an event. If no callback is provided,
all event handlers for this event will be unsubscribed.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td>String</td>
<td>the name of the event</td>
</tr>
<tr>
<td><code>callback</code></td>
<td>Function</td>
<td>the function used when binding to the event</td>
</tr>
</tbody>
</table>
<h3 id="on">.on</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(event, callback);
</span></span></code></pre></div><p>Subscribe to an event. (See <a href="#events">Events</a> for the list.)</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td>String</td>
<td>the name of the event</td>
</tr>
<tr>
<td><code>callback</code></td>
<td>Function</td>
<td>the function to call when the event is emitted</td>
</tr>
</tbody>
</table>
<h3 id="once">.once</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.once(event, callback);
</span></span></code></pre></div><p>Subscribe to an event only <strong>once</strong>. (See <a href="#events">Events</a> for the list.)</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td>String</td>
<td>the name of the event</td>
</tr>
<tr>
<td><code>callback</code></td>
<td>Function</td>
<td>the function to call when the event is emitted</td>
</tr>
</tbody>
</table>
<h3 id="panto">.panTo</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.panTo(arg [, immediately]);
</span></span></code></pre></div><p>Pans the OpenSeadragon viewport to the specified annotation.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation or the annotation ID</td>
</tr>
<tr>
<td><code>immediately</code></td>
<td>Boolean</td>
<td>if <code>true</code> pans without animation</td>
</tr>
</tbody>
</table>
<h3 id="removeannotation">.removeAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.removeAnnotation(arg);
</span></span></code></pre></div><p>Removes an annotation programmatically. <strong>Note:</strong> programmatic remove <strong>will not</strong> trigger the <a href="#deleteannotation">deleteAnnotation event</a>!</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation in W3C WebAnnotation format or the annotation ID</td>
</tr>
</tbody>
</table>
<h3 id="removedrawingtool">.removeDrawingTool</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.removeDrawingTool(id);
</span></span></code></pre></div><p>Removes the drawing tool with the specified tool ID.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>String</td>
<td>the drawing tool ID</td>
</tr>
</tbody>
</table>
<h3 id="saveselected">.saveSelected</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.saveSelected();
</span></span></code></pre></div><p>Saves the current selection. This is essentially a programmatic way to hit the <strong>Ok</strong> button on
the editor.</p>
<h3 id="selectannotation">.selectAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.selectAnnotation(arg);
</span></span></code></pre></div><p>Selects an annotation programmatically, highlighting its shape, and opening the editor popup.
<strong>Note:</strong> programmatic select <strong>will not</strong> trigger the <a href="#selectannotation-1">selectAnnotation event</a>!</p>
<ul>
<li>If no argument is provided (or the annotation or ID is unknown), this method will deselect
the current selection, if any</li>
<li>The method will return the selected annotation as a result</li>
<li>Note that the the <code>selectAnnotation</code> event will <strong>not</strong> fire when using this method</li>
</ul>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation or the annotation ID</td>
</tr>
</tbody>
</table>
<h3 id="setannotations">.setAnnotations</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.setAnnotations(annotations);
</span></span></code></pre></div><p>Renders the list of annotations to the image, removing any previously
existing annotations.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotations</code></td>
<td>Array</td>
<td>array of annotations in W3C WebAnnotation format</td>
</tr>
</tbody>
</table>
<h3 id="setauthinfo">.setAuthInfo</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#268bd2">var</span> anno <span style="color:#719e07">=</span> Annotorious.init({ image<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;my-image&#39;</span> });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>anno.setAuthInfo({
</span></span><span style="display:flex;"><span>  id<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;http://recogito.example.com/rainer&#39;</span>,
</span></span><span style="display:flex;"><span>  displayName<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;rainer&#39;</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>Specifies user authentication information. Annotorious will use this information when annotations
are created or updated, and display it in the editor popup.</p>
<p><img src="/images/setAuthInfo.png" alt="Editor popup example"></p>
<p>Set this data right after initializing Annotorious, and in case the user login status in your host
application changes. The argument to <code>.setAuthInfo</code> is an object with the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>String</td>
<td><strong>REQUIRED</strong> the user ID, which should be a URI</td>
</tr>
<tr>
<td><code>displayName</code></td>
<td>String</td>
<td><strong>REQUIRED</strong> the user name, for display in the UI</td>
</tr>
</tbody>
</table>
<p>Annotorious will insert this data into every new annotation body that gets created:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>{ 
</span></span><span style="display:flex;"><span>  type<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;Annotation&#34;</span>,
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// ...  
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>
</span></span><span style="display:flex;"><span>  body<span style="color:#719e07">:</span>[{
</span></span><span style="display:flex;"><span>    type<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;TextualBody&#34;</span>,
</span></span><span style="display:flex;"><span>    value<span style="color:#719e07">:</span><span style="color:#2aa198">&#34;My comment&#34;</span>,
</span></span><span style="display:flex;"><span>    purpose<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;commenting&#34;</span>,
</span></span><span style="display:flex;"><span>    created<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;2020-05-18T09:39:47.582Z&#34;</span>,
</span></span><span style="display:flex;"><span>    creator<span style="color:#719e07">:</span> {
</span></span><span style="display:flex;"><span>      id<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;http://recogito.example.com/rainer&#34;</span>,
</span></span><span style="display:flex;"><span>      name<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;rainer&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="setdrawingenabled">.setDrawingEnabled</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.setDrawingEnabled(enabled);
</span></span></code></pre></div><p>Switches the OpenSeadragon viewer from its normal zoom &amp; pan behavior to
&ldquo;drawing mode&rdquo;. That means the user no longer needs to hold <strong>SHIFT</strong> in
order to start drawing. Instead, drawing starts immediately when clicking and
holding the mouse button.</p>
<p>After the annotation is created or canceled, OpenSeadragon automatically
switches back to normal zoom &amp; pan behavior.</p>
<p><code>.setDrawingEnabled</code> has no effect while <code>readOnly</code> mode is active.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>Boolean</td>
<td>if <code>true</code> OpenSeadragon switches from navigation to drawing mode</td>
</tr>
</tbody>
</table>
<h3 id="setdrawingtool">.setDrawingTool</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.setDrawingTool(toolName);
</span></span></code></pre></div><p>Switches between the different available drawing tools. Per default, Annotorious
provides a standard rectangle tool (<code>rect</code>) and a standard polygon drawing tool
(<code>polygon</code>).</p>
<p>More tools may be available through plugins. Use <a href="#listdrawingtools">.listDrawingTool</a>
to get the list of registered tools.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>toolName</code></td>
<td>String</td>
<td>E.g. <code>rect</code> or <code>polygon</code></td>
</tr>
</tbody>
</table>
<h3 id="setservertime">.setServerTime</h3>
<p>Set a &ldquo;server time&rdquo; timestamp. When using <a href="#setauthinfo">authInfo</a>, this method helps to synchronize the
<code>created</code> timestamp that Annotorious inserts into the annotation with your server environment, avoiding
problems when the clock isn&rsquo;t properly set in the user&rsquo;s browser.</p>
<p>After setting server time, the Annotorious will adjust the <code>created</code> timestamps by the difference between
server time the user&rsquo;s local clock.</p>
<h3 id="setvisible">.setVisible</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.setVisible(visible);
</span></span></code></pre></div><p>Shows or hides the annotation layer.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>visible</code></td>
<td>Boolean</td>
<td>if <code>true</code> show the annotation layer, otherwise hide it</td>
</tr>
</tbody>
</table>
<h3 id="updateselected">.updateSelected</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.updateSelected(annotation[, saveImmediately]);
</span></span></code></pre></div><p>Replace the currently selected annotation with the one given as argument to .updateSelected.
Optionally: save the annotation immediately, triggering a <code>createAnnotation</code> or
<code>updateAnnotation</code> event.</p>
<blockquote>
<p><strong>Important:</strong> this method returns a Promise. The update will <strong>not</strong> be effective
immediately. Make sure you wait until the Promise completes before saving the annotation.</p>
</blockquote>
<p>Use this method for applications that  (with <code>disableEditor</code> set
to <code>true</code>).</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#268bd2">var</span> anno <span style="color:#719e07">=</span> Annotorious.init({
</span></span><span style="display:flex;"><span>  image<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;my-image&#39;</span>
</span></span><span style="display:flex;"><span>  disableEditor<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;createSelection&#39;</span>, <span style="color:#268bd2">async</span> <span style="color:#268bd2">function</span>(selection) {
</span></span><span style="display:flex;"><span>  selection.body <span style="color:#719e07">=</span> [{
</span></span><span style="display:flex;"><span>    type<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;TextualBody&#39;</span>,
</span></span><span style="display:flex;"><span>    purpose<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;tagging&#39;</span>,
</span></span><span style="display:flex;"><span>    value<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;MyTag&#39;</span>
</span></span><span style="display:flex;"><span>  }];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// Make sure to wait before saving!
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>  <span style="color:#268bd2">await</span> anno.updateSelected(selection);
</span></span><span style="display:flex;"><span>  anno.saveSelected();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// Or: anno.updateSelected(selection, true);
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><h2 id="events">Events</h2>
<h3 id="cancelselected-1">cancelSelected</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;cancelSelected&#39;</span>, <span style="color:#268bd2">function</span>(selection) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired when the user has canceled a selection, by hitting <strong>Cancel</strong> in the editor, or by
clicking or tapping outside the selected annotation shape.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>selection</code></td>
<td>Object</td>
<td>the canceled selection in W3C WebAnnotation format</td>
</tr>
</tbody>
</table>
<h3 id="changeselectiontarget">changeSelectionTarget</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;changeSelectionTarget&#39;</span>, <span style="color:#268bd2">function</span>(target) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired when the shape of a newly created selection, or of a selected annotation
is moved or resized.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target</code></td>
<td>Object</td>
<td>the W3C WebAnnotation target</td>
</tr>
</tbody>
</table>
<h3 id="clickannotation">clickAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;clickAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation, element) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired every time the user clicks an annotation (regardless of whether it is already
selected or not).</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the clicked annotation</td>
</tr>
<tr>
<td><code>element</code></td>
<td>Element</td>
<td>the clicked annotation SVG shape element</td>
</tr>
</tbody>
</table>
<h3 id="createannotation">createAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;createAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation, overrideId) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired when a new annotation is created from a user selection.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation in W3C WebAnnotation format</td>
</tr>
<tr>
<td><code>overrideId</code></td>
<td>Function</td>
<td>a callback function for assigning a custom annotation ID</td>
</tr>
</tbody>
</table>
<p>When an annotation is created, Annotorious automatically assigns it a globally unique
ID. It is possible to override this ID with your own (e.g. server-generated) ID via
the overrideId callback function.</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>r.on(<span style="color:#2aa198">&#39;createAnnotation&#39;</span>, <span style="color:#268bd2">async</span> (annotation, overrideId) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// POST to the server and receive a new ID
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>  <span style="color:#268bd2">const</span> newId <span style="color:#719e07">=</span> <span style="color:#268bd2">await</span> server.createAnnotation(annotation);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// Inject that ID into RecogitoJS
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>  overrideId(newId);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="createselection">createSelection</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;createSelection&#39;</span>, <span style="color:#268bd2">function</span>(selection) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired when a new selection shape is drawn on the image.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>selection</code></td>
<td>Object</td>
<td>the selection object in W3C WebAnnotation format</td>
</tr>
</tbody>
</table>
<h3 id="deleteannotation">deleteAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;deleteAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired when an existing annotation was deleted.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the deleted annotation</td>
</tr>
</tbody>
</table>
<h3 id="mouseenterannotation">mouseEnterAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;mouseEnterAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation, element) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired when the mouse moves into an existing annotation.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation</td>
</tr>
<tr>
<td><code>element</code></td>
<td>Object</td>
<td>the annotation shape SVG element</td>
</tr>
</tbody>
</table>
<h3 id="mouseleaveannotation">mouseLeaveAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;mouseLeaveAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation, element) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired when the mouse moves out of an existing annotation.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation</td>
</tr>
<tr>
<td><code>element</code></td>
<td>Object</td>
<td>the annotation shape SVG element</td>
</tr>
</tbody>
</table>
<h3 id="selectannotation-1">selectAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;selectAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation, element) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired when the user selects an annotation. Note that this event will <strong>not</strong> fire when
the selection is made programmatically through the <code>selectAnnotation(arg)</code> API method.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation in W3C WebAnnotation format</td>
</tr>
<tr>
<td><code>element</code></td>
<td>Element</td>
<td>the annotation SVG shape element</td>
</tr>
</tbody>
</table>
<h3 id="startselection">startSelection</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;startSelection&#39;</span>, <span style="color:#268bd2">function</span>(point) {
</span></span><span style="display:flex;"><span>  console.log(point.x, point.y)
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>Fired when the user starts drawing a new shape.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>point</code></td>
<td>Object</td>
<td>the x/y coordinates of the start point (image pixel coordinates)</td>
</tr>
</tbody>
</table>
<h3 id="updateannotation">updateAnnotation</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>anno.on(<span style="color:#2aa198">&#39;updateAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation, previous) {
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">// 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>});
</span></span></code></pre></div><p>Fired when an existing annotation was updated.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the updated annotation</td>
</tr>
<tr>
<td><code>previous</code></td>
<td>Object</td>
<td>the annotation state before the update</td>
</tr>
</tbody>
</table>
<h2 id="formatters-1">Formatters</h2>
<p>Per default, Annotorious renders annotations as SVG <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/g">group</a>
elements with an <code>a9s-annotation</code> CSS class. A formatter function allows you to dynamically add additional
attributes and elements to the SVG annotation shape.</p>
<p>A formatter is a JavaScript function takes a single argument - the annotation - and must return a <strong>string</strong>, a
<strong>DOM element</strong> or an <strong>object</strong>.</p>
<ul>
<li>If a string is returned, it will be appended to the annotation element CSS class list.</li>
<li>If an object is returned, it should have one or more of the following properties:
<ul>
<li><code>className</code> a string to be added to the CSS class list</li>
<li><code>element</code> a DOM element to be appended to the SVG group</li>
<li><code>data-*</code> a data attribute to add to the annotation SVG element</li>
<li><code>style</code> a list of CSS styles (in the form of a string)</li>
</ul>
</li>
</ul>
<h4 id="element-caveats">Element Caveats</h4>
<p>When using DOM elements, keep in mind that you should specify at least the x,y positions and the width and height attributes.<br>
The x and y positions are calculated from the upper left when using the box tool. If using SVG elements then make sure to use
the appropriate fill/stroke attributes.</p>
<h3 id="string-example">String Example</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#586e75">/** 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"> * This simple formatter will add an extra &#39;long&#39; CSS class to 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"> * long comments
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#268bd2">var</span> formatter <span style="color:#719e07">=</span> <span style="color:#268bd2">function</span>(annotation) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#268bd2">var</span> longComments <span style="color:#719e07">=</span> annotation.bodies.filter(<span style="color:#268bd2">function</span>(body) {
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">var</span> isComment <span style="color:#719e07">=</span> body.type <span style="color:#719e07">===</span> <span style="color:#2aa198">&#39;TextualBody&#39;</span> <span style="color:#719e07">&amp;&amp;</span> 
</span></span><span style="display:flex;"><span>      (body.purpose <span style="color:#719e07">===</span> <span style="color:#2aa198">&#39;commenting&#39;</span> <span style="color:#719e07">||</span> body.purpose <span style="color:#719e07">===</span> <span style="color:#2aa198">&#39;replying&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">var</span> isLong <span style="color:#719e07">=</span> body.value.length <span style="color:#719e07">&gt;</span> <span style="color:#2aa198">100</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">return</span> isComment <span style="color:#719e07">&amp;&amp;</span> isLong;
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">if</span> (longComments.length <span style="color:#719e07">&gt;</span> <span style="color:#2aa198">0</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#586e75">// This annotation contains long comments - add CSS class
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>    <span style="color:#719e07">return</span> <span style="color:#2aa198">&#39;long&#39;</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#268bd2">var</span> anno <span style="color:#719e07">=</span> Annotorious.init({
</span></span><span style="display:flex;"><span>  image<span style="color:#719e07">:</span> <span style="color:#b58900">document</span>.getElementyById(<span style="color:#2aa198">&#39;my-image&#39;</span>),
</span></span><span style="display:flex;"><span>  locale<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;auto&#39;</span>,
</span></span><span style="display:flex;"><span>  formatter<span style="color:#719e07">:</span> formatter
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>You can then apply a visual style to long comments in your own CSS stylesheet.</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#268bd2">a9s-annotation</span>.<span style="color:#268bd2">long</span> {
</span></span><span style="display:flex;"><span>  stroke-width:<span style="color:#2aa198">4</span>;
</span></span><span style="display:flex;"><span>  stroke:<span style="color:#cb4b16">red</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="object-example">Object Example</h3>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#586e75">/**
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"> * This formatter will add usernames from the annotation as a data
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"> * attribute and apply an inline style (red outline) where multiple 
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"> * users have annotated
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#268bd2">var</span> formatter <span style="color:#719e07">=</span> <span style="color:#268bd2">function</span>(annotation) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#268bd2">var</span> contributors <span style="color:#719e07">=</span> [];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  annotation.bodies.forEach(<span style="color:#268bd2">function</span>(body) {
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">if</span> (body.creator)
</span></span><span style="display:flex;"><span>      contributors.push(body.creator.id);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">if</span> (contributors.length <span style="color:#719e07">&gt;</span> <span style="color:#2aa198">1</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">return</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#2aa198">&#39;data-users&#39;</span><span style="color:#719e07">:</span> contributors.join(<span style="color:#2aa198">&#39;, &#39;</span>),
</span></span><span style="display:flex;"><span>      <span style="color:#2aa198">&#39;style&#39;</span><span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;stroke-width:2; stroke: red&#39;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#268bd2">var</span> anno <span style="color:#719e07">=</span> Annotorious.init({
</span></span><span style="display:flex;"><span>  image<span style="color:#719e07">:</span> <span style="color:#b58900">document</span>.getElementyById(<span style="color:#2aa198">&#39;my-image&#39;</span>),
</span></span><span style="display:flex;"><span>  locale<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;auto&#39;</span>,
</span></span><span style="display:flex;"><span>  formatter<span style="color:#719e07">:</span> formatter
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div>
      </div>

      <div class="table-of-contents api">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#initialization">Initialization</a></li>
    <li><a href="#instance-fields">Instance Fields</a>
      <ul>
        <li><a href="#disableeditor">disableEditor</a></li>
        <li><a href="#disableselect">disableSelect</a></li>
        <li><a href="#formatters">formatters</a></li>
        <li><a href="#readonly">readOnly</a></li>
        <li><a href="#widgets">widgets</a></li>
      </ul>
    </li>
    <li><a href="#instance-methods">Instance Methods</a>
      <ul>
        <li><a href="#addannotation">.addAnnotation</a></li>
        <li><a href="#adddrawingtool">.addDrawingTool</a></li>
        <li><a href="#cancelselected">.cancelSelected</a></li>
        <li><a href="#clearannotations">.clearAnnotations</a></li>
        <li><a href="#clearauthinfo">.clearAuthInfo</a></li>
        <li><a href="#destroy">.destroy</a></li>
        <li><a href="#fitbounds">.fitBounds</a></li>
        <li><a href="#fitboundswithconstraints">.fitBoundsWithConstraints</a></li>
        <li><a href="#getannotationbyid">.getAnnotationById</a></li>
        <li><a href="#getannotations">.getAnnotations</a></li>
        <li><a href="#getannotationsintersecting">.getAnnotationsIntersecting</a></li>
        <li><a href="#getimagesnippetbyid">.getImageSnippetById</a></li>
        <li><a href="#getselected">.getSelected</a></li>
        <li><a href="#getselectedimagesnippet">.getSelectedImageSnippet</a></li>
        <li><a href="#listdrawingtools">.listDrawingTools</a></li>
        <li><a href="#loadannotations">.loadAnnotations</a></li>
        <li><a href="#off">.off</a></li>
        <li><a href="#on">.on</a></li>
        <li><a href="#once">.once</a></li>
        <li><a href="#panto">.panTo</a></li>
        <li><a href="#removeannotation">.removeAnnotation</a></li>
        <li><a href="#removedrawingtool">.removeDrawingTool</a></li>
        <li><a href="#saveselected">.saveSelected</a></li>
        <li><a href="#selectannotation">.selectAnnotation</a></li>
        <li><a href="#setannotations">.setAnnotations</a></li>
        <li><a href="#setauthinfo">.setAuthInfo</a></li>
        <li><a href="#setdrawingenabled">.setDrawingEnabled</a></li>
        <li><a href="#setdrawingtool">.setDrawingTool</a></li>
        <li><a href="#setservertime">.setServerTime</a></li>
        <li><a href="#setvisible">.setVisible</a></li>
        <li><a href="#updateselected">.updateSelected</a></li>
      </ul>
    </li>
    <li><a href="#events">Events</a>
      <ul>
        <li><a href="#cancelselected-1">cancelSelected</a></li>
        <li><a href="#changeselectiontarget">changeSelectionTarget</a></li>
        <li><a href="#clickannotation">clickAnnotation</a></li>
        <li><a href="#createannotation">createAnnotation</a></li>
        <li><a href="#createselection">createSelection</a></li>
        <li><a href="#deleteannotation">deleteAnnotation</a></li>
        <li><a href="#mouseenterannotation">mouseEnterAnnotation</a></li>
        <li><a href="#mouseleaveannotation">mouseLeaveAnnotation</a></li>
        <li><a href="#selectannotation-1">selectAnnotation</a></li>
        <li><a href="#startselection">startSelection</a></li>
        <li><a href="#updateannotation">updateAnnotation</a></li>
      </ul>
    </li>
    <li><a href="#formatters-1">Formatters</a>
      <ul>
        <li></li>
        <li><a href="#string-example">String Example</a></li>
        <li><a href="#object-example">Object Example</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    </div>

    <footer>
  <div class="inner">
    <p>Licensed under the <a href="https://github.com/recogito/annotorious/blob/master/LICENSE">BSD License</a></p>
    <p>Need help? Get in touch via the <a href="https://gitter.im/recogito/annotorious" class="no-break">Annotorious Gitter Chat</a></p>
    <p>Want to help improve documentation? <a href="https://github.com/recogito/project-website-source">Fork this website</a> and send a pull request!</p>
    <p class="social-links">
      <span class="no-break">
        <a href="https://github.com/recogito/annotorious"><img src="/images/github-logo.svg"></a>
        <a href="https://github.com/recogito/annotorious">github.com/recogito</a> 
        &nbsp;
      </span>

      <span class="no-break">
        <a href="https://twitter.com/aboutgeo"><img src="/images/twitter-logo.svg"></a>
        <a href="https://twitter.com/aboutgeo">twitter.com/aboutgeo</a> 
        &nbsp;
      </span>

      <span class="no-break">
        <a href="https://www.patreon.com/rainersimon"><img src="/images/sponsors-logo.svg"></a>
        <a href="https://www.patreon.com/rainersimon">Become a sponsor</a> 
      </span>
    </p>
  </div>
</footer>

  </body>
</html>