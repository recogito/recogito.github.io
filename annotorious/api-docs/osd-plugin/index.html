<!DOCTYPE html>
<html>
  <head>
    <title>Annotorious | API Docs | Annotorious OSD Plugin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
      
    <link rel="stylesheet" href="/css/style.min.9123f7e014ded6aa0953e623c9cca980eebbf69f3c15a12ffa6c9320d4e24a78.css">
    <meta name="description" content="API Documentation for the Annotorious OpenSeadragon plugin">
<meta name="twitter:title" content="Annotorious OpenSeadragon API" />
<meta name="twitter:image:src" content="https://recogito.github.io/images/annotorious-social-large.png" />
<meta name="twitter:site" content="@aboutgeo" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="API Documentation for the Annotorious OpenSeadragon plugin">
<meta property="og:title" content="Annotorious OpenSeadragon API" />
<meta property="og:description" content="API Documentation for the Annotorious OpenSeadragon plugin">
<meta property="og:url" content="https://recogito.github.io/annotorious/api-docs/osd-plugin" />
<meta property="og:image" content="https://recogito.github.io/images/annotorious-social-large.png" />
<meta property="og:type" content="object" />

  </head>
  <body>
    <div id="navbar" class="navbar">
  <script>
    var openResponsiveMenu = function() {
      var el = document.getElementById('navbar');
      if (el.className === 'navbar') {
        el.className = 'navbar responsive';
      } else {
        el.className = 'navbar';
      }
    };
  </script>
  <header>
    <div class="mobile-only">
      <button class="hamburger-icon" id="open-responsive-menu" onclick="openResponsiveMenu()">
        <img src="/images/menu-24px.svg">
      </button>      
    </div>
    <ul>
      <li>
        <a href="/annotorious/">Home</a>
      </li>

      <li class=''>
        <a href="/annotorious/getting-started">Getting Started</a>
      </li>

      <li class='current'>
        <a href="/annotorious/api-docs">API Docs</a>
      </li>
      
      <li class=''>
        <a href="/guides">Guides</a>
      </li>
      
      <li class=''>
        <a href="/annotorious/about">About</a>
      </li>
      
      <li class="github"><a href="https://github.com/recogito/annotorious"><img src="/images/github-logo.svg"></a></li>
    </ul>
  </header>
</div>

    <div class="column">
      <div class="main-content">
        <h1 id="api-reference-openseadragon-plugin">API Reference: OpenSeadragon Plugin</h1>
<blockquote>
<p>The <strong>OpenSeadragon Plugin</strong> is an extension to the <a href="http://openseadragon.github.io/">OpenSeadragon</a>,
zoomable image viewer. The API reference for the Annotorious standard version is available
<a href="/annotorious/api-docs/annotorious">here</a>.</p>
</blockquote>
<h2 id="initializing-the-plugin">Initializing the Plugin</h2>
<p>Initialize Annotorious on an OpenSeadragon viewer instance with</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">var</span> anno <span style="color:#719e07">=</span> OpenSeadragon.Annotorious(viewer, config);
</code></pre></div><p>The <code>config</code> is optional, and must be an object with the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Value</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>readOnly</code></td>
<td>Boolean</td>
<td>Set to <code>true</code> to display annotations read-only</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>tagVocabulary</code></td>
<td><code>Array</code></td>
<td>A list of strings to use as a pre-defined tag vocabulary in the tagging widget</td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="instance-methods">Instance Methods</h2>
<h3 id="addannotation">.addAnnotation</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.addAnnotation(annotation);
</code></pre></div><p>Adds an annotation programmatically. The format is the
<a href="https://github.com/recogito/annotorious-openseadragon/wiki/Web-Annotation-Model">W3C WebAnnotation model</a>.
At the moment, only a single <code>FragmentSelector</code> with an <code>xywh=pixel</code> fragment is supported.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation in W3C WebAnnotation format</td>
</tr>
</tbody>
</table>
<h3 id="clearauthinfo">.clearAuthInfo</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.clearAuthInfo();
</code></pre></div><p>Clears the user auth information. Annotorious will no longer insert creator data
when a new annotation is created or updated. (See <a href="#setauthinfo">setAuthInfo</a> for
more information about creator data.)</p>
<h3 id="destroy">.destroy</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.destroy();
</code></pre></div><p>Destroys this instance of Annotorious, removing the annotation layer on the image.</p>
<h3 id="fitbounds">.fitBounds</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.fitBounds(arg [, immediately]);
</code></pre></div><p>Makes the OpenSeadragon viewport pan and zoom to the bounds of the specified annotation.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation or the annotation ID</td>
</tr>
<tr>
<td><code>immediately</code></td>
<td>Boolean</td>
<td>if <code>true</code> pans and zooms without animation</td>
</tr>
</tbody>
</table>
<h3 id="getannotations">.getAnnotations</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.getAnnotations();
</code></pre></div><p>Returns all annotations according to the current rendered state, in W3C Web Annotation format.</p>
<h3 id="loadannotations">.loadAnnotations</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.loadAnnotations(url);
</code></pre></div><p>Loads annotations from a JSON URL. The method returns a promise, in
case you want to perform an action after the annotations have loaded.</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">anno.loadAnnotations(url).then(<span style="color:#268bd2">function</span>(annotations) {
  <span style="color:#586e75">// Do something
</span><span style="color:#586e75"></span>});
</code></pre></div><table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td>String</td>
<td>the URL to HTTP GET the annotations from</td>
</tr>
</tbody>
</table>
<h3 id="off">.off</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.off(event [, callback]);
</code></pre></div><p>Unsubscribe from an event. If no callback is provided,
all event handlers for this event will be unsubscribed.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td>String</td>
<td>the name of the event</td>
</tr>
<tr>
<td><code>callback</code></td>
<td>Function</td>
<td>the function used when binding to the event</td>
</tr>
</tbody>
</table>
<h3 id="on">.on</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.on(event, callback);
</code></pre></div><p>Subscribe to an event. (See <a href="#events">Events</a> for the list.)</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td>String</td>
<td>the name of the event</td>
</tr>
<tr>
<td><code>callback</code></td>
<td>Function</td>
<td>the function to call when the event is emitted</td>
</tr>
</tbody>
</table>
<h3 id="panto">.panTo</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.panTo(arg [, immediately]);
</code></pre></div><p>Pans the OpenSeadragon viewport to the specified annotation.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation or the annotation ID</td>
</tr>
<tr>
<td><code>immediately</code></td>
<td>Boolean</td>
<td>if <code>true</code> pans without animation</td>
</tr>
</tbody>
</table>
<h3 id="removeannotation">.removeAnnotation</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.removeAnnotation(arg);
</code></pre></div><p>Removes an annotation programmatically.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation in W3C WebAnnotation format or the annotation ID</td>
</tr>
</tbody>
</table>
<h3 id="selectannotation">.selectAnnotation</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.selectAnnotation(arg);
</code></pre></div><p>Selects an annotation programmatically, highlighting its shape, and opening the editor popup.</p>
<ul>
<li>If no argument is provided (or the annotation or ID is unknown), this method will deselect
the current selection, if any</li>
<li>The method will return the selected annotation as a result</li>
<li>Note that the the <code>selectAnnotation</code> event will <strong>not</strong> fire when using this method</li>
</ul>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arg</code></td>
<td>String, Object</td>
<td>the annotation or the annotation ID</td>
</tr>
</tbody>
</table>
<h3 id="setannotations">.setAnnotations</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.setAnnotations(annotations);
</code></pre></div><p>Renders the list of annotations to the image, removing any previously
existing annotations.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotations</code></td>
<td>Array</td>
<td>array of annotations in W3C WebAnnotation format</td>
</tr>
</tbody>
</table>
<h3 id="setauthinfo">.setAuthInfo</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">var</span> anno <span style="color:#719e07">=</span> Annotorious.init({ image<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;my-image&#39;</span> });

anno.setAuthInfo({
  id<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;http://recogito.example.com/rainer&#39;</span>,
  displayName<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;rainer&#39;</span>
});
</code></pre></div><p>Specifies user authentication information. Annotorious will use this information when annotations
are created or updated, and display it in the editor popup.</p>
<p><img src="/images/setAuthInfo.png" alt="Editor popup example"></p>
<p>Set this data right after initializing Annotorious, and in case the user login status in your host
application changes. The argument to <code>.setAuthInfo</code> is an object with the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>String</td>
<td><strong>REQUIRED</strong> the user ID, which should be a URI</td>
</tr>
<tr>
<td><code>displayName</code></td>
<td>String</td>
<td><strong>REQUIRED</strong> the user name, for display in the UI</td>
</tr>
</tbody>
</table>
<p>Annotorious will insert this data into every new annotation body that gets created:</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{ 
  type<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;Annotation&#34;</span>,
  
  <span style="color:#586e75">// ...  
</span><span style="color:#586e75"></span>
  body<span style="color:#719e07">:</span>[{
    type<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;TextualBody&#34;</span>,
    value<span style="color:#719e07">:</span><span style="color:#2aa198">&#34;My comment&#34;</span>,
    purpose<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;commenting&#34;</span>,
    created<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;2020-05-18T09:39:47.582Z&#34;</span>,
    creator<span style="color:#719e07">:</span> {
      id<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;http://recogito.example.com/rainer&#34;</span>,
      name<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;rainer&#34;</span>
    }
  }]
}
</code></pre></div><h3 id="setdrawingenabled">.setDrawingEnabled</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.setDrawingEnabled(enabled);
</code></pre></div><p>Switches the OpenSeadragon viewer from its normal zoom &amp; pan behavior to
&ldquo;drawing mode&rdquo;. That means the user no longer needs to hold <strong>SHIFT</strong> in
order to start drawing. Instead, drawing starts immediately when clicking and
holding the mouse button.</p>
<p>After the annotation is created or canceled, OpenSeadragon automatically
switches back to normal zoom &amp; pan behavior.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>Boolean</td>
<td>if <code>true</code> OpenSeadragon switches from navigation to drawing mode</td>
</tr>
</tbody>
</table>
<h3 id="setdrawingtool">.setDrawingTool</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.setDrawingTool(toolName);
</code></pre></div><blockquote>
<p>This feature is experimental. The API will likely change in the future.</p>
</blockquote>
<p>Switches between the different available drawing tools. At the moment, only
the built-in rubberband rectangle and polygon tools are available.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>toolName</code></td>
<td>String</td>
<td>Either <code>rect</code> or <code>polygon</code></td>
</tr>
</tbody>
</table>
<h3 id="setservertime">.setServerTime</h3>
<p>Set a &ldquo;server time&rdquo; timestamp. When using <a href="#setauthinfo">authInfo</a>, this method helps to synchronize the
<code>created</code> timestamp that Annotorious inserts into the annotation with your server environment, avoiding
problems when the clock isn&rsquo;t properly set in the user&rsquo;s browser.</p>
<p>After setting server time, the Annotorious will adjust the <code>created</code> timestamps by the difference between
server time the user&rsquo;s local clock.</p>
<h2 id="events">Events</h2>
<h3 id="cancelselection">cancelSelection</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.on(<span style="color:#2aa198">&#39;cancelSelection&#39;</span>, <span style="color:#268bd2">function</span>(selection) {
  <span style="color:#586e75">// 
</span><span style="color:#586e75"></span>});
</code></pre></div><p>Fired when the creates a selection and then aborts by clicking cancel.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>selection</code></td>
<td>Object</td>
<td>the canceled selection in W3C WebAnnotation format</td>
</tr>
</tbody>
</table>
<h3 id="createannotation">createAnnotation</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.on(<span style="color:#2aa198">&#39;createAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation) {
  <span style="color:#586e75">// 
</span><span style="color:#586e75"></span>});
</code></pre></div><p>Fired when a new annotation is created from a user selection.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation in W3C WebAnnotation format</td>
</tr>
</tbody>
</table>
<h3 id="deleteannotation">deleteAnnotation</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.on(<span style="color:#2aa198">&#39;deleteAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation) {
  <span style="color:#586e75">// 
</span><span style="color:#586e75"></span>});
</code></pre></div><p>Fired when an existing annotation was deleted.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the deleted annotation</td>
</tr>
</tbody>
</table>
<h3 id="mouseenterannotation">mouseEnterAnnotation</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.on(<span style="color:#2aa198">&#39;mouseEnterAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation, event) {
  <span style="color:#586e75">// 
</span><span style="color:#586e75"></span>});
</code></pre></div><p>Fired when the mouse moves into an existing annotation.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation</td>
</tr>
<tr>
<td><code>event</code></td>
<td>Object</td>
<td>the original mouse event</td>
</tr>
</tbody>
</table>
<h3 id="mouseleaveannotation">mouseLeaveAnnotation</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.on(<span style="color:#2aa198">&#39;mouseLeaveAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation, event) {
  <span style="color:#586e75">// 
</span><span style="color:#586e75"></span>});
</code></pre></div><p>Fired when the mouse moves out of an existing annotation.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation</td>
</tr>
<tr>
<td><code>event</code></td>
<td>Object</td>
<td>the original mouse event</td>
</tr>
</tbody>
</table>
<h3 id="selectannotation-1">selectAnnotation</h3>
<p>Fired when the user selects an annotation. Note that this event will <strong>not</strong> fire when
the selection is made programmatically through the <code>selectAnnotation(arg)</code> API method.</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.on(<span style="color:#2aa198">&#39;selectAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation) {
  <span style="color:#586e75">// 
</span><span style="color:#586e75"></span>});
</code></pre></div><table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the annotation in W3C WebAnnotation format</td>
</tr>
</tbody>
</table>
<h3 id="updateannotation">updateAnnotation</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">anno.on(<span style="color:#2aa198">&#39;updateAnnotation&#39;</span>, <span style="color:#268bd2">function</span>(annotation, previous) {
  <span style="color:#586e75">// 
</span><span style="color:#586e75"></span>});
</code></pre></div><p>Fired when an existing annotation was updated.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>annotation</code></td>
<td>Object</td>
<td>the updated annotation</td>
</tr>
<tr>
<td><code>previous</code></td>
<td>Object</td>
<td>the annotation state before the update</td>
</tr>
</tbody>
</table>

      </div>
    </div>

    <footer>
  <div class="inner">
    <p>Licensed under the <a href="https://github.com/recogito/annotorious/blob/master/LICENSE">BSD License</a></p>
    <p>Need help? Contact us via the <a href="https://gitter.im/recogito/annotorious">Annotorious Gitter Chat</a></p>
    <p class="github-link">
      <a href="https://github.com/recogito/annotorious"><img src="/images/github-logo.svg"></a>
      <a href="https://github.com/recogito/annotorious">github.com/recogito</a> 
    </p>
  </div>
</footer>
  </body>
</html>